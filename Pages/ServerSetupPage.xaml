<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Cashere.Pages.ServerSetupPage"
             BackgroundColor="{DynamicResource PageBackgroundColor}">

    <Grid RowDefinitions="Auto,*,Auto" Padding="0">
        <!-- Header Section -->
        <VerticalStackLayout Grid.Row="0" Padding="30" Spacing="8">
            <Label Text="CafePOS API Server"
                   FontSize="32"
                   FontAttributes="Bold"
                   TextColor="{DynamicResource PrimaryTextColor}" />
            <Label Text="Configure and launch your local server instance"
                   FontSize="14"
                   TextColor="{DynamicResource SecondaryTextColor}"
                   Opacity="0.8" />
        </VerticalStackLayout>

        <!-- Main Content -->
        <ScrollView Grid.Row="1" Padding="20" >
            <VerticalStackLayout Spacing="24">

                <!-- Server Status Card -->
                <Frame BorderColor="{DynamicResource BorderColor}"
                   CornerRadius="16"
                   Padding="0"
                   HasShadow="False"
                   BackgroundColor="{DynamicResource HeaderBackgroundColor}">
                    <VerticalStackLayout Padding="24" Spacing="12">
                        <HorizontalStackLayout Spacing="12" VerticalOptions="Center">
                            <Label Text="●"
                               FontSize="16"
                               x:Name="StatusIndicator"
                               TextColor="{DynamicResource DangerColor}" />
                            <Label Text="Server Status"
                               FontSize="14"
                               FontAttributes="Bold"
                               TextColor="{DynamicResource PrimaryTextColor}"
                               VerticalOptions="Center" />
                        </HorizontalStackLayout>
                        <Label x:Name="StatusLabel"
                           Text="Offline"
                           FontSize="28"
                           FontAttributes="Bold"
                           TextColor="{DynamicResource DangerColor}" />
                        <Label x:Name="StatusDetailLabel"
                           Text="Ready to start"
                           FontSize="12"
                           TextColor="{DynamicResource SecondaryTextColor}" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Configuration Section -->
                <VerticalStackLayout Spacing="12">
                    <Label Text="Server Configuration"
                       FontSize="16"
                       FontAttributes="Bold"
                       TextColor="{DynamicResource PrimaryTextColor}" />

                    <Frame BorderColor="{DynamicResource BorderColor}"
                       CornerRadius="12"
                       Padding="0"
                       HasShadow="False"
                       BackgroundColor="{DynamicResource HeaderBackgroundColor}">
                        <VerticalStackLayout Padding="16" Spacing="8">
                            <Label Text="Port Number"
                               FontSize="12"
                               TextColor="{DynamicResource SecondaryTextColor}"
                               FontAttributes="Bold" />
                            <Entry x:Name="PortEntry"
                               Placeholder="7102"
                               PlaceholderColor="{DynamicResource SecondaryTextColor}"
                               Keyboard="Numeric"
                               BackgroundColor="Transparent"
                               TextColor="{DynamicResource PrimaryTextColor}"
                               FontSize="18"
                               HeightRequest="48"
                               MaxLength="5" />
                        </VerticalStackLayout>
                    </Frame>
                </VerticalStackLayout>

                <!-- Network Information -->
                <VerticalStackLayout Spacing="12">
                    <Label Text="Network Details"
                       FontSize="16"
                       FontAttributes="Bold"
                       TextColor="{DynamicResource PrimaryTextColor}" />

                    <Frame BorderColor="{DynamicResource BorderColor}"
                       CornerRadius="12"
                       Padding="16"
                       HasShadow="False"
                       BackgroundColor="{DynamicResource HeaderBackgroundColor}">
                        <VerticalStackLayout Spacing="12">
                            <VerticalStackLayout Spacing="6">
                                <Label Text="Your IP Address"
                                   FontSize="12"
                                   TextColor="{DynamicResource SecondaryTextColor}"
                                   FontAttributes="Bold" />
                                <Label x:Name="IpLabel"
                                   Text="Click 'Show IP' to retrieve"
                                   FontSize="14"
                                   TextColor="{DynamicResource PrimaryTextColor}"
                                   FontAttributes="Bold" />
                            </VerticalStackLayout>
                            <Button Text="🔍 Retrieve IP Address"
                                Clicked="OnShowIPClicked"
                                BackgroundColor="{DynamicResource AccentColor}"
                                TextColor="White"
                                CornerRadius="10"
                                FontAttributes="Bold"
                                FontSize="14"
                                HeightRequest="44" />
                        </VerticalStackLayout>
                    </Frame>
                </VerticalStackLayout>

            </VerticalStackLayout>


        </ScrollView>


        <!-- Footer Action Buttons -->
        <VerticalStackLayout Grid.Row="2" Padding="20" Spacing="12">
            <Button Text="🚀 Start Server"
                    Clicked="OnStartServerClicked"
                    BackgroundColor="{DynamicResource PrimaryColor}"
                    TextColor="White"
                    CornerRadius="12"
                    FontAttributes="Bold"
                    FontSize="16"
                    HeightRequest="56"
                    x:Name="StartButton" />

        </VerticalStackLayout>
    </Grid>

</ContentPage>